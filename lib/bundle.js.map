{"version":3,"sources":["webpack:///webpack/bootstrap 4b3918e5d7b3e39045f5","webpack:///./lib/perihelion.js","webpack:///./lib/game_view.js","webpack:///./lib/star.js","webpack:///./lib/ship.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;;AAEA;AACA;;AAEA,EAAC;;;;;;;ACPD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAgC,aAAa;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAuB,uBAAuB;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACzGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC3BA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,sBAAqB;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA4B,aAAa;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4b3918e5d7b3e39045f5","const GameView = require('./game_view');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  const gameView = new GameView();\n  gameView.start();\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/perihelion.js\n// module id = 0\n// module chunks = 0","const Star = require('./star');\nconst Ship = require('./ship');\n\nclass GameView {\n\n  constructor(){\n    this.board = new createjs.Stage('game-canvas');\n    this.star = new Star();\n    this.ship = new Ship();\n    this.canvasEl = document.getElementById('game-canvas');\n    this.shipDrag = false;\n    this.gravitationalConstant = 0.5;\n\n    this.getVectorEnd = this.getVectorEnd.bind(this);\n    this.getVectorStart = this.getVectorStart.bind(this);\n    this.setCanvasSize = this.setCanvasSize.bind(this);\n    this.tick = this.tick.bind(this);\n\n    this.canvasEl.addEventListener('mousedown', this.getVectorStart);\n    this.canvasEl.addEventListener('mouseup', this.getVectorEnd);\n\n    window.onload = window.onresize = this.setCanvasSize;\n\n  }\n\n  start() {\n    this.timer = setInterval( this.tick, 17 );\n  }\n\n  render(){\n    this.board.removeAllChildren();\n    this.star.render(this.board);\n    this.ship.render(this.board);\n    this.board.update();\n  }\n\n  setCanvasSize(){\n    this.canvasEl.width = window.innerWidth;\n    this.canvasEl.height = window.innerHeight;\n    this.star.centerStar();\n    this.ship.changeOnResize();\n  }\n\n  setShipDrag( mousePosition = { X: 0, Y: 0 } ){\n    if ( this.ship.clicked(mousePosition) ){\n      this.shipDrag = true;\n    }\n  }\n\n  getVectorStart(){\n    const mouseX = event.pageX - this.canvasEl.offsetLeft;\n    const mouseY = event.pageY - this.canvasEl.offsetTop;\n    this.vectorStartX = mouseX;\n    this.vectorStartY = mouseY;\n    this.setShipDrag( { X: mouseX, Y: mouseY } );\n  }\n\n  getVectorEnd(){\n    this.vectorEndX = event.pageX - this.canvasEl.offsetLeft;\n    this.vectorEndY = event.pageY - this.canvasEl.offsetTop;\n    if ( this.shipDrag ) {\n      this.shipDrag = false;\n      this.setShipVelocity();\n    }\n  }\n\n  setShipVelocity(){\n    const deltaX = this.vectorEndX - this.vectorStartX;\n    const deltaY = this.vectorEndY - this.vectorStartY;\n    this.ship.setInitVelocity( deltaX, deltaY );\n  }\n\n  distanceBetween(){\n    const deltaX = this.ship.position.X - this.star.position.X;\n    const deltaY = this.ship.position.Y - this.star.position.Y;\n    return Math.sqrt( Math.pow(deltaX, 2) + Math.pow(deltaY, 2) );\n  }\n\n  gravitationalNormal(){\n    return (\n      ( this.gravitationalConstant * this.ship.mass * this.star.mass ) /\n      Math.pow( this.distanceBetween(), 2)\n    );\n  }\n\n  tick(){\n    const gForce = {\n      normal: this.gravitationalNormal(),\n      deltaX: this.star.position.X - this.ship.position.X,\n      deltaY: this.star.position.Y - this.ship.position.Y\n    };\n    this.ship.changePosition( gForce );\n    this.render();\n    if ( this.didCollide() ){\n      console.log(\"COLLISION!\");\n      clearInterval( this.timer );\n    }\n  }\n\n  didCollide(){\n    return ( this.distanceBetween() <= this.ship.radius + this.star.radius );\n  }\n\n}\n\nmodule.exports = GameView;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/game_view.js\n// module id = 1\n// module chunks = 0","class Star {\n\n  constructor(){\n    this.mass = 300;\n    this.fillColor = '#f7ff91';\n    this.radius = 75;\n    \n    this.centerStar();\n  }\n\n  render(board){\n    const star = new createjs.Shape();\n    star.graphics.beginFill(this.fillColor).drawCircle(0, 0, this.radius);\n    star.x = this.position.X;\n    star.y = this.position.Y;\n    board.addChild(star);\n  }\n\n  centerStar(){\n    this.position = {\n      X: window.innerWidth / 2,\n      Y: window.innerHeight / 2\n    };\n  }\n\n}\n\nmodule.exports = Star;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/star.js\n// module id = 2\n// module chunks = 0","class Ship {\n\n  constructor(){\n    this.mass = 1;\n    this.fillColor = '#6a6ced';\n    this.radius = 10;\n    this.position = { X: 100, Y: 100 };\n    this.velocity = { deltaX: 5, deltaY: -10 };\n    this.launched = false;\n    this.speedReducer = 0.025;\n\n    this.setWindowCenter();\n  }\n\n  setWindowCenter(){\n    this.windowCenterX = window.innerWidth / 2;\n    this.windowCenterY = window.innerHeight / 2;\n  }\n\n  setInitVelocity( deltaX, deltaY ){\n    this.launched = true;\n    this.velocity = {\n      deltaX: deltaX * this.speedReducer,\n      deltaY: deltaY * this.speedReducer\n    };\n  }\n\n  render(board){\n    const ship = new createjs.Shape();\n    ship.graphics.beginFill(this.fillColor).drawCircle(0, 0, this.radius);\n    ship.x = this.position.X;\n    ship.y = this.position.Y;\n    board.addChild(ship);\n  }\n\n  clicked( mousePosition = { X: 0, Y: 0 } ){\n    if ( this.launched ) return false;\n    const diffX = Math.abs( mousePosition.X - this.position.X );\n    const diffY = Math.abs( mousePosition.Y - this.position.Y );\n    return ( diffX <= this.radius && diffY <= this.radius );\n  }\n\n  changePosition( gForce ){\n    if ( !this.launched ) return;\n    const gNormal = gForce.normal;\n    this.velocity.deltaX += gForce.deltaX * gNormal;\n    this.velocity.deltaY += gForce.deltaY * gNormal;\n    this.position.X += this.velocity.deltaX;\n    this.position.Y += this.velocity.deltaY;\n  }\n\n  changeOnResize(){\n    const distX = this.windowCenterX - this.position.X;\n    const distY = this.windowCenterY - this.position.Y;\n    this.setWindowCenter();\n    this.position = {\n      X: this.windowCenterX - distX,\n      Y: this.windowCenterY - distY\n    };\n  }\n\n}\n\nmodule.exports = Ship;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/ship.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}